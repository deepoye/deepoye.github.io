import{a as K,b as Q,c as W,d as X,e as Y,f as Z,g as ee,h as te,i as re}from"./chunk-E52YUDSZ.js";import{C as L,D as z,E as H,F as J,a as I,b as d,d as O,e as q,h as A,j as G,k,l as B,m as $}from"./chunk-V6CNCQF3.js";import{$a as V,Aa as g,Ab as D,Bb as C,Ca as P,Ea as v,G as _,K as m,M as y,N as E,Qa as x,Ra as a,Ua as N,Ya as R,Za as T,ab as U,c as b,ea as l,ia as h,pb as j,qa as p,ua as u,va as f,ya as o,za as r}from"./chunk-CYPUUF2W.js";import{c as F}from"./chunk-ACKELEN3.js";var ie=t=>{let e=t.get("password")?.value,S=t.get("confirmPassword")?.value;return e&&S&&e===S?null:{passwordMatch:!0}};function ae(t,e){t&1&&(o(0,"mat-error"),a(1,"Please provide a valid email"),r())}function se(t,e){t&1&&(o(0,"mat-error"),a(1,"Password must be at least 8 characters long"),r())}function me(t,e){t&1&&(o(0,"mat-error"),a(1,"Must match password field"),r())}function le(t,e){t&1&&(o(0,"mat-error"),a(1,"Could not create account with those details."),r())}function ce(t,e){t&1&&g(0,"mat-spinner",7)}var ne=(()=>{let e=class e{constructor(){this.status=U.required(),this.register=V(),this.fb=m(B),this.registerForm=this.fb.nonNullable.group({email:["",[d.email,d.required]],password:["",[d.minLength(8),d.required]],confirmPassword:["",[d.required]]},{updateOn:"blur",validators:[ie]})}onSubmit(){if(this.registerForm.valid){let s=this.registerForm.getRawValue(),{confirmPassword:n}=s,i=F(s,["confirmPassword"]);this.register.emit(i)}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=h({type:e,selectors:[["app-register-form"]],inputs:{status:[1,"status"]},outputs:{register:"register"},decls:27,vars:6,consts:[["form","ngForm"],[3,"ngSubmit","formGroup"],["appearance","fill"],["matNativeControl","","formControlName","email","type","email","placeholder","email"],["matPrefix",""],["matNativeControl","","formControlName","password","data-test","create-password-field","type","password","placeholder","password"],["matNativeControl","","formControlName","confirmPassword","type","password","placeholder","confirm password"],["diameter","50"],["mat-raised-button","","color","accent","type","submit",3,"disabled"]],template:function(n,i){if(n&1){let c=P();o(0,"form",1,0),v("ngSubmit",function(){return y(c),E(i.onSubmit())}),o(2,"mat-form-field",2)(3,"mat-label"),a(4,"email"),r(),g(5,"input",3),o(6,"mat-icon",4),a(7,"email"),r(),u(8,ae,2,0,"mat-error"),r(),o(9,"mat-form-field")(10,"mat-label"),a(11,"password"),r(),g(12,"input",5),o(13,"mat-icon",4),a(14,"lock"),r(),u(15,se,2,0,"mat-error"),r(),o(16,"mat-form-field")(17,"mat-label"),a(18,"confirm password"),r(),g(19,"input",6),o(20,"mat-icon",4),a(21,"lock"),r(),u(22,me,2,0,"mat-error"),r(),u(23,le,2,0,"mat-error")(24,ce,1,0,"mat-spinner",7),o(25,"button",8),a(26," Submit "),r()()}if(n&2){let c=x(1);p("formGroup",i.registerForm),l(8),f((i.registerForm.controls.email.dirty||c.submitted)&&!i.registerForm.controls.email.valid?8:-1),l(7),f((i.registerForm.controls.password.dirty||c.submitted)&&!i.registerForm.controls.password.valid?15:-1),l(7),f((i.registerForm.controls.confirmPassword.dirty||c.submitted)&&i.registerForm.hasError("passwordMatch")?22:-1),l(),f(i.status()==="error"?23:i.status()==="loading"?24:-1),l(2),p("disabled",i.status()==="loading")}},dependencies:[$,A,I,O,q,G,k,z,L,Y,X,K,Q,W,ee,Z,J,H,re,te],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}button[_ngcontent-%COMP%]{width:100%}mat-error[_ngcontent-%COMP%]{margin:5px 0}mat-spinner[_ngcontent-%COMP%]{margin:1rem 0}"]});let t=e;return t})();var w=(()=>{let e=class e{constructor(){this.authService=m(C),this.createUser$=new b,this.createUser=D(this.createUser$),this.createdUser=T({params:this.createUser,loader:({params:s})=>this.authService.createAccount(s)})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=_({token:e,factory:e.\u0275fac});let t=e;return t})();var ke=(()=>{let e=class e{constructor(){this.registerService=m(w),this.authService=m(C),this.router=m(j),R(()=>{this.authService.user()&&this.router.navigate(["home"])})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=h({type:e,selectors:[["app-register"]],features:[N([w])],decls:2,vars:1,consts:[[1,"container","gradient-bg"],[3,"register","status"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"app-register-form",1),v("register",function(M){return i.registerService.createUser$.next(M)}),r()()),n&2&&(l(),p("status",i.registerService.createdUser.status()))},dependencies:[ne],encapsulation:2});let t=e;return t})();export{ke as default};
